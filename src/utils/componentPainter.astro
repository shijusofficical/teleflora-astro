---
import DynamicRenderer from '@utils/dynamicRenderer';

// JSON data (Replace this with an API fetch if needed)
const data = [
  {
    component: 'Header',
    props: { title: 'Welcome to Astro!' },
    directive: 'idle', // Use directive names without "client:"
  },
  {
    component: 'NavBarContainer',
    props: { title: 'Welcome to Astro!' },
    directive: 'idle',
  },
  {
    component: 'BannerCarousel',
    props: { images: ['banner1.jpg', 'banner2.jpg'] },
    directive: 'idle',
  },
  {
    component: 'Products',
    props: { category: 'electronics' },
    directive: 'visible',
  },
  {
    component: 'Footer',
    props: { text: 'Â© 2025 My Site' },
    directive: 'visible',
  },
];
---

{data.map((item) => {
  return (
    <DynamicRenderer
      components={[item]}
      client:load={item.directive === 'load'}
      client:idle={item.directive === 'idle'}
      client:visible={item.directive === 'visible'}
    />
  );
})}